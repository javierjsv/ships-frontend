<app-header auth="true" id="form"></app-header>


<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <form [formGroup]="form" (ngSubmit)="save()">


          <div class="col-12 form-group mb-0 px-0">
            <label class="mt-0 font-size-14">{{"NAME" | translate}} </label>
            <input type="text" class="form-control"
                   aria-describedby="url"
                   placeholder="" formControlName="nombre">
            <span *ngIf="(form.controls.nombre.status == 'INVALID') && (form.controls.nombre.touched)"
                  class="text-danger">
          The field is required
        </span>
          </div>

          <div class="col-12 form-group mb-0 px-0 mt-2">
            <label class="mt- font-size-140">{{"EMAIL" | translate }}</label>
            <input type="text" class="form-control"
                   aria-describedby="name"
                   placeholder="" formControlName="email">
            <span *ngIf="(form.controls.email.status == 'INVALID') && (form.controls.email.touched)"
                  class="text-danger">
										The field is required
									</span>
          </div>


        </form>


      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>

<div class="row mx-0 px-5 px-md-5 px-lg-5 mt-4">

  <div class="col-12  col-md-4 col-lg-4 mb-3">

    <div class="card-border text-center p-5">
      <img class="avatar-border img-fluid" [src]="GlobalStr.ADMIN" alt="piloto">
      <p class="mb-0 mt-2 font-size-18">{{profile?.nombre}} | <b> {{"ADMIN" | translate}}</b></p>
      <p class="font-size-18 mb-0">{{profile?.email}}</p>
    </div>
  </div>

  <div class="col-12 col-md-8 col-lg-8">

    <div class="card-border text-center p-5">
      <h1 class="display-4 text-primary">{{"ADMID_SYSMTEM" | translate}}</h1>
      <p class="font-size-30 p-4" style="font-size: 30px">{{"USER_MANAGEMENT" | translate}}</p>
    </div>

  </div>

    <div class="col-12 my-3 " id="formUptade" [ngClass]="{'d-none' : !state.save }">
      <div class="card-border p-5">

        <form [formGroup]="form" (ngSubmit)="save()">


          <div class="col-12 form-group mb-0 px-0">
            <label class="mt-0 font-size-14">{{"NAME" | translate}} </label>
            <input type="text" class="form-control"
                   aria-describedby="url"
                   placeholder="" formControlName="nombre">
            <span *ngIf="(form.controls.nombre.status == 'INVALID') && (form.controls.nombre.touched)"
                  class="text-danger">
          The field is required
        </span>
          </div>

          <div class="col-12 form-group mb-0 px-0">
            <label class="mt-0 font-size-14">{{"IDENTIFICATION_CARD" | translate}} </label>
            <input type="text" class="form-control"
                   aria-describedby="url"
                   placeholder="" formControlName="cedula">
            <span *ngIf="(form.controls.cedula.status == 'INVALID') && (form.controls.cedula.touched)"
                  class="text-danger">
          The field is required
        </span>
          </div>

          <div class="col-12 form-group mb-0 px-0 mt-2">
            <label class="mt- font-size-140">{{"EMAIL" | translate }}</label>
            <input type="text" class="form-control"
                   aria-describedby="name"
                   placeholder="" formControlName="email">
            <span *ngIf="(form.controls.email.status == 'INVALID') && (form.controls.email.touched)"
                  class="text-danger">
										The field is required
									</span>
          </div>


          <div class="col-12 form-group mb-0 px-0 mt-2 text-center">
            <button class="btn btn-primary my-3" (click)="save()" [disabled]="form.invalid">
              <i class="fas fa-user"></i> {{"SAVE" |Â translate}}
            </button>
          </div>


        </form>


      </div>

    </div>


  <div class="col-12 mb-5">

    <h2 class="my-3">{{"USERS" | translate}}</h2>

    <div class="card-border p-5 mt-3">


      <div class="table-responsive">


        <table class="table table-th-border-0 table-td-border-1-bottom">
          <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">{{"NAME" | translate}}</th>
            <th scope="col">{{"IDENTIFICATION_CARD" | translate}}</th>
            <th scope="col">{{"EMAIL" | translate}}</th>
            <th scope="col">{{"ROL" | translate}}</th>
            <th scope="col">{{"OPTIONS" | translate}}</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let user of users; index as i">
            <th scope="row">{{user?.id}}</th>
            <td>{{user?.nombre}}</td>
            <td>{{user?.cedula}}</td>
            <td>{{user?.email}}</td>
            <td *ngFor="let rol of user['roles']">{{rol?.nombre}}</td>
            <td>{{user?.cedula}}</td>
            <td>
              <i class="fas fa-edit text-success mr-3 cursor" data-toggle="modal" data-target="#exampleModal"
                 (click)="setValue(user)">
              </i>
              <i class="fas fa-trash-alt text-danger cursor" (click)="deleteLik(user , i)"></i>
            </td>
          </tr>


          </tbody>
        </table>
      </div>

    </div>


  </div>

</div>

